<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="记email的一些踩坑留下来的心路历程">
<meta property="og:type" content="article">
<meta property="og:title" content="对优雅地发送电子邮件的探索">
<meta property="og:url" content="https://blog.yrx.me/post/7917a08b/">
<meta property="og:site_name" content="Run away with me">
<meta property="og:description" content="记email的一些踩坑留下来的心路历程">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-08-22T15:13:53.000Z">
<meta property="article:modified_time" content="2021-12-01T16:18:41.847Z">
<meta property="article:author" content="mingmeng">
<meta property="article:tag" content="摸爬滚打">
<meta property="article:tag" content="Email">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="../../assets/32.png">
          
        
        
          
            <link rel="icon" type="image/png" href="../../assets/120.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="../../assets/120.png">
          
        
    
    <!-- title -->
    <title>对优雅地发送电子邮件的探索</title>
    <!-- styles -->
    
<link rel="stylesheet" href="../../css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="../../css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="../../index.html">首页</a></li>
         
          <li><a href="../../archives/">归档</a></li>
         
          <li><a href="../../search/">搜索</a></li>
         
          <li><a href="../../about/">关于</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="../41798c93/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <!-- qq空间分享 暂时没有找到icon 先不加入 -->
  <!-- <li><a class="icon" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.yrx.me/post/7917a08b/&sharesource=qzone&title=对优雅地发送电子邮件的探索&summary=记email的一些踩坑留下来的心路历程&pics=//blog.rx-0.top/assets/120.png" target="_blank" rel="noopener"><i 
    class="fab fa-star " aria-hidden="true"></i></a></li> -->
  <li><a class="icon"
      href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.yrx.me/post/7917a08b/&sharesource=qzone&title=对优雅地发送电子邮件的探索&summary=记email的一些踩坑留下来的心路历程"><i 
        class="fab fa-qq " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://service.weibo.com/share/share.php?url=https://blog.yrx.me/post/7917a08b/&sharesource=weibo&title=对优雅地发送电子邮件的探索&appkey=2309657449" target="_blank" rel="noopener"><i 
        class="fas fa-weibo " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://blog.yrx.me/post/7917a08b/" target="_blank" rel="noopener"><i
        class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://blog.yrx.me/post/7917a08b/&text=对优雅地发送电子邮件的探索" target="_blank" rel="noopener"><i
        class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=对优雅地发送电子邮件的探索&body=记email的一些踩坑留下来的心路历程:https://blog.yrx.me/post/7917a08b/"><i
        class="fas fa-envelope " aria-hidden="true"></i></a></li>
</ul>
    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-电子邮件相关概念"><span class="toc-number">1.</span> <span class="toc-text">1. 电子邮件相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-E-mail是什么？"><span class="toc-number">1.1.</span> <span class="toc-text">1) E-mail是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SMTP是什么？"><span class="toc-number">1.2.</span> <span class="toc-text">2) SMTP是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-电子邮件送达率的意义？"><span class="toc-number">1.3.</span> <span class="toc-text">3) 电子邮件送达率的意义？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-如何优雅地让用户收到邮件？"><span class="toc-number">2.</span> <span class="toc-text">2. 如何优雅地让用户收到邮件？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-选择SMTP服务"><span class="toc-number">2.1.</span> <span class="toc-text">1) 选择SMTP服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-优雅地通过Anti-Fraud"><span class="toc-number">2.2.</span> <span class="toc-text">2) 优雅地通过Anti-Fraud</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-优雅地使用SMTP"><span class="toc-number">2.3.</span> <span class="toc-text">3) 优雅地使用SMTP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-参考"><span class="toc-number">3.</span> <span class="toc-text">4.参考</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        对优雅地发送电子邮件的探索
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">mingmeng</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-08-22T15:13:53.000Z" itemprop="datePublished">2021-08-22</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="../../tags/Email/" rel="tag">Email</a>, <a class="tag-link" href="../../tags/%E6%91%B8%E7%88%AC%E6%BB%9A%E6%89%93/" rel="tag">摸爬滚打</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="1-电子邮件相关概念"><a href="#1-电子邮件相关概念" class="headerlink" title="1. 电子邮件相关概念"></a>1. 电子邮件相关概念</h2><h3 id="1-E-mail是什么？"><a href="#1-E-mail是什么？" class="headerlink" title="1) E-mail是什么？"></a>1) E-mail是什么？</h3><p>按照<a href="https://zh.wikipedia.org/wiki/电子邮件" target="_blank" rel="noopener">电子邮件 - 维基百科</a>的说法，电子邮件定义是：</p>
<blockquote>
<p>一种由一寄件人将数字信息发送给一个人或多个人的信息交换方式</p>
</blockquote>
<h3 id="2-SMTP是什么？"><a href="#2-SMTP是什么？" class="headerlink" title="2) SMTP是什么？"></a>2) SMTP是什么？</h3><p>按照<a href="https://zh.wikipedia.org/wiki/简单邮件传输协议" target="_blank" rel="noopener">简单邮件传输协议 - 维基百科</a>的说法，SMTP定义是：</p>
<blockquote>
<p><strong>简单邮件传输协议</strong>（英语：<strong>S</strong>imple <strong>M</strong>ail <strong>T</strong>ransfer <strong>P</strong>rotocol，缩写：<strong>SMTP</strong>）是一个在<a href="https://zh.wikipedia.org/wiki/網際網路" target="_blank" rel="noopener">互联网</a>上传输<a href="https://zh.wikipedia.org/wiki/電子郵件" target="_blank" rel="noopener">电子邮件</a>的标准。</p>
</blockquote>
<p>简单来说，SMTP协议就是一个基于TCP/IP的、专门用于发送电子邮件的应用层协议。</p>
<h3 id="3-电子邮件送达率的意义？"><a href="#3-电子邮件送达率的意义？" class="headerlink" title="3) 电子邮件送达率的意义？"></a>3) 电子邮件送达率的意义？</h3><p>不同于国内，在国外SMS（Short Message Service，短消息服务）其实使用没有国内这么广泛。国外网站很多和用户的交互仍然是通过电子邮件的。而ToC的邮件</p>
<p>ToC： <strong>OTA发货/退款成功后，给到用户的通知邮件</strong>。</p>
<p>ToB： <strong>对账</strong></p>
<p>这些场景对邮件送达率和送达时延的要求非常高。试想一下：</p>
<ul>
<li>付钱买了机票火车票之后，票的相关信息一直没收到，或者是发车/起飞后你才收到</li>
<li>和供应商对账约定好是十一点之前需要将对账结果以邮件形式发给他们，然而供应商没有收到或者收到时间非常滞后，导致他们按照合同认为我们昨天没有订单然后进行结算。</li>
</ul>
<p>这些场景下，邮件的<strong>送达率</strong>要求是<strong>越接近100%越好</strong>，而<strong>送达时延</strong>是要求<strong>越接近0越好</strong>。</p>
<h2 id="2-如何优雅地让用户收到邮件？"><a href="#2-如何优雅地让用户收到邮件？" class="headerlink" title="2. 如何优雅地让用户收到邮件？"></a>2. 如何优雅地让用户收到邮件？</h2><p>聊完邮件究竟在我们的业务场景会用来干什么，那么如何达成我们的目标–邮件的<strong>送达率</strong>要求是<strong>越接近100%越好</strong>，而<strong>送达时延</strong>是要求<strong>越接近0越好</strong>，就成为了另一个问题。</p>
<h3 id="1-选择SMTP服务"><a href="#1-选择SMTP服务" class="headerlink" title="1) 选择SMTP服务"></a>1) 选择SMTP服务</h3><p>因为发送邮件基于SMTP协议，送达率和送达时延很大程度上基于中间的SMTP服务是否稳定和高可用。所以我们的第一个解决思路是找到靠谱的SMTP服务。</p>
<ul>
<li><a href="https://mail.google.com/" target="_blank" rel="noopener">Google Mail</a>（目前世界上最大的邮件服务提供商，截至2018年拥有15亿用户)</li>
<li><a href="https://www.mailgun.com/" target="_blank" rel="noopener">MailGun</a> (MailGun是一个第三方邮件服务网关，提供各种各样的API来方便用户提供服务)</li>
</ul>
<p>前者Gmail自身就是最大的邮件服务提供者，它的邮件送达率也比一般意义上的SMTP服务高一些。并且也能最优雅和简单地通过各个邮件服务提供商如Microsoft Outlook和Yahoo Mail等设置的风控和白名单等Anti-Fraud手段。</p>
<p>而后者是一个基于API的集成了发送、接收和追踪电子邮件等功能的邮件发送服务商，具体的介绍可以在这里看到<a href="https://en.wikipedia.org/wiki/Mailgun" target="_blank" rel="noopener">MailGun</a></p>
<p>我们知道电商场景下，本身和用户的信息交互就会比较多。另外一个角度来看，国外的通知服务并不像国内这样习惯使用SMS（Short Message Service，短信息服务）进行交互。邮件仍然是国外主要的通知交互手段。</p>
<h3 id="2-优雅地通过Anti-Fraud"><a href="#2-优雅地通过Anti-Fraud" class="headerlink" title="2) 优雅地通过Anti-Fraud"></a>2) 优雅地通过Anti-Fraud</h3><p>读到这里是不是有一些疑问：</p>
<ul>
<li>按照上面的说法，邮件不是正常的保障其符合SMTP协议，然后网络通畅将就可以将其正确的送达收件人的邮箱么？为什么网络的SLA在可以做到三四个甚至五个9的情况（理想情况，并不是指实际业务情况）下，邮件送达率连两个9都不能到达呢？</li>
</ul>
<p>原因其实很真实，因为除了网络的因素之外，现代的电子邮件系统已经建立了强大的风控系统。</p>
<p>这里大家可以去体验一下自建服务：Github上随机找一个开箱可用的SMTP服务项目（如果自带了绕过风控检测的组件，关掉它。），run起来之后配置下DNS，然后发100封邮件给QQ、Outlook、Gmail这些开放式邮箱服务提供商。最后统计一下送达率，你会惊讶的发现，即使你只发送一个hello world，没有任何敏感词，你的邮件仍然会很容易让收件人收不到，即使收到了，也有很大概率在收件人的垃圾箱里面。</p>
<p>自建SMTP送达率低的情况为什么会出现，其实主要是现在的大型邮件服务提供商，都有通过判断发信人可信度的方式，来判定一封邮件是否是垃圾邮件的检查措施。这部分的技术主要有微软的Sender ID、雅虎的DomainKeys、网易的Spam Feedback等技术。但是判断发信人来源是否可信，只是众多反垃圾邮件手段其中的一项。现代反垃圾邮件系统，同时也会通过判断邮件内容是否有敏感词等等手段，来判断这封邮件是否是一封垃圾邮件。</p>
<p>总结一下，Anti-Fraud 对于邮件送达率的打击会比较高。因此正确地编写通知邮件内容、控制发送频率和使用稳定而可信的SMTP等对通过Anti-Fraud就显得至关重要。</p>
<blockquote>
<p>有兴趣的同学可以继续参看：<a href="https://www.zhihu.com/question/19574247" target="_blank" rel="noopener">怎么样才能让自己服务器发出的邮件不被 Gmail、Hotmail、163、QQ 等邮箱放入垃圾箱？</a>，里面的回答普遍质量比较高。</p>
</blockquote>
<h3 id="3-优雅地使用SMTP"><a href="#3-优雅地使用SMTP" class="headerlink" title="3) 优雅地使用SMTP"></a>3) 优雅地使用SMTP</h3><p>讲完了选择SMTP和如何绕开Anti-Fraud之后，还有一个至关重要的部分也需要注意：优雅地调用SMTP服务。这部分有以下几点需要注意：</p>
<ol>
<li>SMTP本身是一个基于TCP/IP的网络协议。SMTP服务器也和其他中间件一样，是需要通过网络调用的。对于存在网络调用的场景，就不可避免的谈到一点：调用开销。如果上传的文件比较大，而出口带宽又比较小时，就需要注意此时<strong>发送邮件设置的超时时间是否合理</strong>，是否足够邮件附件上传完成。</li>
<li><strong>SMTP服务器对附件大小有限制</strong>，对市面上的大部分邮件服务而言，附件限制都是<strong>25M</strong>。如果超过大小限制，建议是使用第三方存储服务来进行文件传递，邮件上只附上下载方式即可。</li>
<li><strong>SMTP服务器对邮件发送频率和发送上限也会有限制</strong>。对于Gmail，可以查看<a href="https://support.google.com/a/answer/166852" target="_blank" rel="noopener">Google Workspace 中的 Gmail 发送上限 - Google Workspace 管理员帮助</a>，按照文档里的描述，Gmail的每日发送上限是2000。并且这个24小时<strong>并不是自然天</strong>，而是滚动的24小时。也就是说Gmail的发送频率限制实际上是<strong>2000封/24小时</strong>。</li>
<li><strong>SMTP服务器的调用ip需要稳定</strong>。Gmail的风控手段之一是：客户端数量限制。而这个客户端数量是以<strong>调用Gmail SMTP的ip数</strong>来确定的。同时由于现在hub的分布式部署，即使同一个实例，有可能在调用Gmail SMTP时，仍然有可能使用了不同的ip，造成Google的风控认为多点登录从而将账号短暂封禁。因此建议在使用Gmail时，通过固定IP进行调用。降低被风控的可能性。</li>
</ol>
<h2 id="4-参考"><a href="#4-参考" class="headerlink" title="4.参考"></a>4.参考</h2><p><a href="https://support.google.com/a/topic/9202?hl=zh-Hans&ref_topic=9197" target="_blank" rel="noopener">Gmail - Google Workspace 管理员帮助</a></p>
<p><a href="https://www.zhihu.com/question/19574247" target="_blank" rel="noopener">怎么样才能让自己服务器发出的邮件不被 Gmail、Hotmail、163、QQ 等邮箱放入垃圾箱？</a></p>
<p>Wikipedia</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="../../index.html">首页</a></li>
         
          <li><a href="../../archives/">归档</a></li>
         
          <li><a href="../../search/">搜索</a></li>
         
          <li><a href="../../about/">关于</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-电子邮件相关概念"><span class="toc-number">1.</span> <span class="toc-text">1. 电子邮件相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-E-mail是什么？"><span class="toc-number">1.1.</span> <span class="toc-text">1) E-mail是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SMTP是什么？"><span class="toc-number">1.2.</span> <span class="toc-text">2) SMTP是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-电子邮件送达率的意义？"><span class="toc-number">1.3.</span> <span class="toc-text">3) 电子邮件送达率的意义？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-如何优雅地让用户收到邮件？"><span class="toc-number">2.</span> <span class="toc-text">2. 如何优雅地让用户收到邮件？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-选择SMTP服务"><span class="toc-number">2.1.</span> <span class="toc-text">1) 选择SMTP服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-优雅地通过Anti-Fraud"><span class="toc-number">2.2.</span> <span class="toc-text">2) 优雅地通过Anti-Fraud</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-优雅地使用SMTP"><span class="toc-number">2.3.</span> <span class="toc-text">3) 优雅地使用SMTP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-参考"><span class="toc-number">3.</span> <span class="toc-text">4.参考</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <!-- qq空间分享 暂时没有找到icon 先不加入 -->
  <!-- <li><a class="icon" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.yrx.me/post/7917a08b/&sharesource=qzone&title=对优雅地发送电子邮件的探索&summary=记email的一些踩坑留下来的心路历程&pics=//blog.rx-0.top/assets/120.png" target="_blank" rel="noopener"><i 
    class="fab fa-star fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon"
      href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.yrx.me/post/7917a08b/&sharesource=qzone&title=对优雅地发送电子邮件的探索&summary=记email的一些踩坑留下来的心路历程"><i 
        class="fab fa-qq fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://service.weibo.com/share/share.php?url=https://blog.yrx.me/post/7917a08b/&sharesource=weibo&title=对优雅地发送电子邮件的探索&appkey=2309657449" target="_blank" rel="noopener"><i 
        class="fas fa-weibo fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://blog.yrx.me/post/7917a08b/" target="_blank" rel="noopener"><i
        class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://blog.yrx.me/post/7917a08b/&text=对优雅地发送电子邮件的探索" target="_blank" rel="noopener"><i
        class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=对优雅地发送电子邮件的探索&body=记email的一些踩坑留下来的心路历程:https://blog.yrx.me/post/7917a08b/"><i
        class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
</ul>
    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 mingmeng <a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener">赣ICP备17002327号</a>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="../../index.html">首页</a></li>
         
          <li><a href="../../archives/">归档</a></li>
         
          <li><a href="../../search/">搜索</a></li>
         
          <li><a href="../../about/">关于</a></li>
        
      </ul>
    </nav>
  </div>
  <!-- <div class="footer-left"> Thanks for <a href="https://github.com/probberechts/hexo-theme-cactus" target="_blank" rel="noopener">cactus</a>, <a href="https://hexo.io/" target="_blank" rel="noopener">hexo</a>, <a href="https://github.com/GetToSet" target="_blank" rel="noopener">GetToSet</a></div> -->
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="../../lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="../../lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="../../lib/jquery/jquery.min.js"></script>


<script src="../../lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="../../lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="../../js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-150933648-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?dd6e58987f7993d7d192dfd3401320a6";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<!-- Disqus Comments -->


</body>
</html>
